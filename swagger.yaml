openapi: 3.0.0
info:
  description: Documentation for InDesign APIs (Beta) - Firefly Services. This document provides a detailed specification of the various exposed APIs, that can be leveraged by developers. 
  version: 0.1.0
  title: InDesign APIs (Beta) - Firefly Services
  contact:
    email: idservices@adobe.com
tags:
  - name: rendition
    description: Rendition APIs.
  - name: dataMerge
    description: Data Merge API.
security:
  - ApiKeyAuth: []
  - BearerAuth: [] 
paths:

  /v3/create-rendition:
    post:
      tags:
        - rendition
      summary: Creates JPEG,PNG or PDF renditions.
      description: Creates and returns JPEG,PNG or PDF renditions of a specific InDesign document.
        Output rendition has mimetype 'image/jpeg' for jpeg, 'image/png' for png and 'application/pdf' for pdf. For the structure of output/data refer to RenditionOutputData. Also for the list of possible error codes in failedEvent refer to RenditionFailedData.
      operationId: renditionJob
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateRenditionRequest"
        description: Job request object that specifies parameters for the generation of JPEG, PNG or PDF.
          output.
        required: true
      responses:
        202:
          $ref: '#/components/responses/Accepted'
        400:
          $ref: "#/components/responses/BadParams"
        401:
          $ref: "#/components/responses/Unauthorized"
        403:
          $ref: "#/components/responses/Forbidden"
        404:
          $ref: "#/components/responses/NotFound"
        500:
          $ref: "#/components/responses/InternalServerError"
      
  /v3/merge-data:
    post:
      tags:
        - dataMerge
      summary: Performs data merge.
      description: Creates and returns merged InDesign documents or PDFs that are created after merging the data and the given template.
        Output rendition has mimetype 'image/jpeg' for jpeg, 'image/png' for png, 'application/pdf' for pdf or 'application/x-indesign' for indd. For the structure of StatusCompletedResponse/output/data refer to DataMergeOutputData. Also for the list of possible error codes in FailedEvent refer to DataMergeFailedData.
      operationId: dataMerge
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MergeDataRequest"
        description: Job request object that specifies parameters for merging the data as per the given template.
        required: true
      responses:
        202:
          $ref: '#/components/responses/Accepted'
        400:
          $ref: "#/components/responses/BadParams"
        401:
          $ref: "#/components/responses/Unauthorized"
        403:
          $ref: "#/components/responses/Forbidden"
        404:
          $ref: "#/components/responses/NotFound"
        500:
          $ref: "#/components/responses/InternalServerError"

  /v3/merge-data-tags:
    post:
      tags:
        - dataMerge
      summary: Gets data merge tags
      description: Retrieves the data merge tags from the document. For the structure of StatusCompletedResponse/output/data refer to DataMergeTagsOutputData. Also for the list of possible error codes in FailedEvent refer to DataMergeFailedData.
      operationId: dataMergeTags
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MergeDataTagsRequest"
        description: Job request object that specifies parameters for retrieving the data merge tags.
        required: true
      responses:
        202:
          $ref: '#/components/responses/Accepted'
        400:
          $ref: "#/components/responses/BadParams"
        401:
          $ref: "#/components/responses/Unauthorized"
        403:
          $ref: "#/components/responses/Forbidden"
        404:
          $ref: "#/components/responses/NotFound"
        500:
          $ref: "#/components/responses/InternalServerError"

  /v3/status/{id}:
    get:
      summary: Gets latest status for a job.
      description: Returns the latest status event of a capability execution.
      parameters:
        - name: id
          in: path
          description: ID, for which the status has to be retrieved.
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Status of a capability execution.
          content:
            application/json:
              schema:
                type: object
                oneOf:
                  - $ref: '#/components/schemas/notstartedEvent'
                  - $ref: '#/components/schemas/runningEvent'
                  - $ref: '#/components/schemas/succeededEvent'
                  - $ref: '#/components/schemas/failedEvent'
          headers:
            retry-after:
              schema:
                type: integer
              description: Number of retries  

  /v3/capability:
    post:
      summary: Submit custom capability.
      description: Submit the capability bundle. Returns the URL for posting execution request against the capability
      parameters:
        - name: x-gw-ims-org-id
          in: header
          description: Identifier for IMS organization as defined in Adobe's developer console
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/zip:
            schema:
              type: object
        description: Capability bundle in ZIP format. This describes the capability to App Engine
        required: true
      responses:
        '202':
          description: Status of a capability execution.
          content:
            application/json:
              schema:
                properties:
                  capability:
                    type: string
                    description: Name of capability as specified in capability manifest
                  version:
                    type: string
                    description: Version of capability as specified in capability manifest
                  url:
                    type: string
                    description: URL to submit execution request against the capability
        400:
          $ref: "#/components/responses/BadParams"
        401:
          $ref: "#/components/responses/Unauthorized"
        403:
          $ref: "#/components/responses/Forbidden"
        404:
          $ref: "#/components/responses/NotFound"
        500:
          $ref: "#/components/responses/InternalServerError"

  /v3/capability/{product}/{organization}/{capability}:
    post:
      summary: Submit capability execution request.
      description: Define the input assets and parameters with which the capability should be executed against the app engine.
      parameters:
        - name: x-gw-ims-org-id
          in: header
          description: Identifier for IMS organization as defined in Adobe's developer console
          required: true
          schema:
            type: string
        - name: product
          in: path
          description: Name of the target app engine as specified in capability manifest
          required: true
          schema:
            type: string
        - name: organization
          in: path
          description: organization identifier as reported by response to capability submit request
          required: true
          schema:
            type: string
        - name: capability
          in: path
          description: Name of the capability specified in capability manifest
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BaseJobRequestWithOutput"
        description: Job request object that specifies parameters for the execution of capability.
        required: true
      responses:
        202:
          $ref: '#/components/responses/Accepted'
        400:
          $ref: "#/components/responses/BadParams"
        401:
          $ref: "#/components/responses/Unauthorized"
        403:
          $ref: "#/components/responses/Forbidden"
        404:
          $ref: "#/components/responses/NotFound"
        500:
          $ref: "#/components/responses/InternalServerError"

servers:
  - url: https://indesign-stage.adobe.io/
components:
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: x-api-key
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  responses:
    Accepted:
      description: The job/capability has been accepted for processing.
      content:
        application/json:
          schema:
            properties:
              jobId:
                type: string
                description: ID
              statusUrl:
                type: string
                description: Status URL
      headers:
        link:
          schema:
            type: string
          description: status url for retry
        retry-after:
          schema:
            type: integer
          description: Number of retries  
        
    BadParams:
      description: Bad Parameter
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    Unauthorized:
      description: Unauthorized
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    Forbidden:
      description: Forbidden
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    NotFound:
      description: Not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
    InternalServerError:
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
  schemas:
    Error:
      type: object
      properties:
        message:
          type: string
        error_code:
          type: string
      required:
        - message
        - error_code

    BaseJobRequest:
      description: Base job request for any job.
      required:
        - assets
      properties:
        assets:
          type: array
          items:
            $ref: "#/components/schemas/InputAsset"
          description: Information about the assets, which will be used to process the job.
        params:
          type: object
          properties:
            generalSettings:
              description: General settings.
              type: object
              properties:
                fonts:
                  description: Settings related to fonts.
                  type: object
                  properties:
                    adobeFonts:
                      description: The list of documents to include or exclude from the search for Adobe Fonts. If missing, it means all the documents are to be checked for Adobe Fonts.
                      type: object
                      properties:
                        includeDocuments:
                          description: The list will specify the documents to check for adobe fonts. No other document will be checked for Adobe Fonts. Empty means no document to be checked for. If absent, then all the input documents are to be checked.
                          type: array
                          items:
                            type: string
                            description: This provides a path relative to a temporary base directory (working directory) where the document can be found. It cannot go up using '..' or '/'. Should be a valid file name.
                        excludeDocuments:
                          description: The list will specify the documents to exclude from search. The documents mentioned here will be removed from document list mentioned in includeDocuments parameter or in absence of that parameter from the complete list of documents which can be gathered from the assets params.
                          type: array
                          items:
                            type: string
                            description: This provides a path relative to a temporary base directory (working directory) where the document can be found. It cannot go up using '..' or '/'. Should be a valid file name.
                    fontsDirectories:
                      description: This lists the directories to be used as font directories for the input InDesign documents. "Document Fonts" in parallel to the document will continue to work even without specifying. In absence of this, temporary base directory (working directory) will be considered as a font directory.
                      type: array
                      items:
                        type: string
                        description: This provides a path of a directory relative to a temporary base directory (working directory) where the fonts can be found. It cannot go up using '..' or '/'. Should be a valid path. For specifying working directory, mention '.'.
                links:
                  description: Settings related to links.
                  type: object
                  properties:
                    replaceLinks:
                      type: array
                      items:
                          type: object
                          required:
                          - targetDocument
                          - mapping
                          properties:
                            targetDocument:
                              description: The document in which the relinking is to be done.
                              type: string
                            mapping:
                              type: array
                              items:
                                type: object
                                required:
                                - newAssetRelativePath
                                properties:
                                  currentURI:
                                    type: string
                                    description: The existing URI of the link that needs relinking. If multiple links with this URI are found, all will be relinked. If linkID is provided, this attribute will be ignored. Either one of currentURI or linkID should be present.
                                  linkID:
                                    type: integer
                                    description: The ID of the link which is to be relinked. If currentURI, is also provided it would be ignored. Either one of currentURI or linkID should be present.
                                  newAssetRelativePath:
                                    type: string
                                    description: This provides a path relative to a temporary base directory (working directory) where the asset to be linked to can be found. It cannot go up using '..' or '/'. Should be a valid file name.
                appLogs:
                  description: Describes parameters regarding application logs.
                  type: object
                  properties:
                    logsRelativePath:
                      type: string
                      description: This provides a path to a file, relative to the temporary base directory (working directory). This file is where application's logs are to be dumped.

    BaseJobRequestWithOutput:
      allOf:
        - $ref: '#/components/schemas/BaseJobRequest'
        - description: Base job request for any job with the option to specify output urls.
          type: object
          properties:
            outputs:
              type: array
              items:
                $ref: '#/components/schemas/OutputAsset'

    BaseOutputData:
      description: Base output data for any job. 
      type: object
      properties:
        generalData:
          type: object
          description: Provides any general data corresponding to the job.
          properties:
            appLogs:
              type: object
              description: Provides information regarding the app logs file. This is only present if params/generalSettings/appLogs is provided in input.
              properties:
                created:
                  type: boolean
                  description: True, if the file creation was successful and false otherwise.
                errorReason:
                  type: string
                  description: In case of failure, the reason for the failure.
                logsPath:
                  type: string
                  description: Provided path for the log file.

    WarningResponse:
      description: Response containing the warnings from a process.
      type: object
      properties:
        missingFonts:
          description: List of missing fonts.
          type: array
          items:
            type: string
            description: The name of a missing font.
        missingLinks:
          description: List of missing links.
          type: array
          items:
            type: string
            description: The url of the missing link.
        otherWarnings:
          description: List of remaining warnings.
          type: array
          items:
            type: string
            description: The description of the warning.

    MergeWarningResponse:
      description: Response containing the warnings after a merge process.
      allOf:
        - $ref: '#/components/schemas/WarningResponse'
        - type: object
          properties:
            csvMissingLinks:
              description: List of missing links from CSV.
              type: array
              items:
                type: string
                description: The url of the missing link.
            oversetText:
              description: The information about the overset texts.
              type: array
              items:
                type: object
                properties:
                  page:
                    type: integer
                    description: The page number of overset instance.
                  charactersInOverset:
                    description: The number of characters in overset.
                    type: integer
                  wordsInOverset:
                    description: The number of words in overset.
                    type: integer
                  oversetText:
                    description: The part of text which is in overset.
                    type: string

    RenditionOutputData:
      allOf:
        - $ref: '#/components/schemas/BaseOutputData'
        - description: Output data for a rendition request.
          type: object
          properties:
            outputs:
              type: array
              items:
                type: object
                properties:
                  input:
                    type: string
                    description: The input file path in the working directory.
                  renditions:
                    description: Information about the created renditions.
                    type: array
                    items:
                      $ref: "#/components/schemas/RenditionDef"
                  warnings:
                    $ref: '#/components/schemas/WarningResponse'
                    description: Warnings generated during the rendition request.

    RenditionDef:
      type: object
      properties:
        pageIndex:
          type: string
          description: Refers to the indices of a page/spread in the input document for which the rendition information is provided.
        path:
          description: The paths corresponding to the pages mentioned in pageIndex.
          type: array
          items:
            type: string

    RenditionFailedData:
      allOf:
        - $ref: '#/components/schemas/FailedEvent'
        - description: Failed Event for JPEG, PNG or PDF Rendition APIs. For details of error codes refer to ErrorCodesAndDefinitions.
          type: object
          properties:
            data:
              type: object
              properties:
                code:
                  type: integer
                  description: The error code.
                  enum:
                    - 'runtime_error'
                    - 'capability_error'
                    - 'validation_error'

    CreateRenditionRequest:
      allOf:
        - $ref: '#/components/schemas/BaseJobRequestWithOutput'
        - description: Inputs and properties with which the job should be processed.
          type: object
          required:
          - params
          properties:
            params:
              type: object
              required:
              - targetDocuments
              - outputMediaType
              properties:
                targetDocuments:
                  description: List of documents to render as per the given parameters. Currently, only one document is supported.
                  type: array
                  items:
                    type: string
                  minItems: 1
                  maxItems: 1
                outputMediaType:
                  description: The type output rendition to be created.
                  type: string
                  enum:
                    - 'image/jpeg'
                    - 'image/png'
                    - 'application/pdf'
                exportingSpread:
                  type: boolean
                  default: false
                  description: Specify true if you consider range as spread numbers, false if you treat range as pages. 
                pageRange:
                  type: string
                  default: All
                  description: Page ranges. The ranges are based on index of the page within
                    the document. Value can be 'All' along with numeral ranges. Also,
                    if exportingSpread is true, this range would represent spread
                    indices in the document.
                quality:
                  type: string
                  description: Defines the quality of the output.
                  default: medium
                  enum:
                    - low
                    - medium
                    - high
                    - maximum
                renderingStyle:
                  type: string
                  description: Specifies formatting options for the converted JPEG images.
                  default: baseline_encoding
                  enum:
                    - baseline_encoding
                    - progressive_encoding
                resolution:
                  type: integer
                  default: 72
                  description: Specifies the resolution of the final image.
                  minimum: 1
                  maximum: 2400
                colorSpace:
                  type: string
                  description: Specifies formatting options for converted JPEG images.
                  default: rgb
                  enum:
                    - rgb
                    - cmyk (only for jpeg)
                    - gray
                embedColorProfile:
                  type: boolean
                  default: true
                  description: Specify true to embed the color profile, false otherwise.
                antiAlias:
                  type: boolean
                  default: true
                  description: If true, uses the anti-aliasing for text and vectors during export.
                simulateOverprint:
                  type: boolean
                  default: false
                  description: If true, simulates the effects of overprinting spot and processes
                    colors in the same way they would occur when you print.
                useDocumentBleeds:
                  type: boolean
                  default: false
                  description: If true, uses the document's bleed settings in the exported JPEG.
                colorSettingsFile:
                  type: string
                  description: The color settings file to be used for generating a rendition.
                transparentBackground:
                  type: boolean
                  default: false
                  description: If true, uses a transparent background for the exported PNG. This is valid only for PNG rendition.
                createSeparateFiles:
                  type: boolean
                  default: false
                  description: Specify true for creating separate PDF files for all the specified
                    pages/spreads. This is applicable only in case of pdf rendition.
                optimizeForFastWebView:
                  type: boolean
                  default: true
                  description: Specify true for optimizing the PDF for faster web viewing. This is applicable only in case of pdf rendition.
                embedPageThumbnails:
                  type: boolean
                  default: false
                  description: Specify true for embedding page thumbnails. This is applicable only in case of pdf rendition.
                includeBookmarks:
                  type: boolean
                  default: false
                  description: If true, displays bookmarks and table of contents entries as
                    links in the bookmarks pane of the PDF document. If false, bookmarks are not exported. This is applicable only in case of pdf rendition.
                includeHyperlinks:
                  type: boolean
                  default: false
                  description: If true, includes hyperlinks when exporting the document. This is applicable only in case of pdf rendition.
                exportNonprintingObjects:
                  type: boolean
                  default: false
                  description: If true, makes non-printing objects visible in the PDF document. This is applicable only in case of pdf rendition.
                exportGuidesAndGrids:
                  type: boolean
                  default: false
                  description: If true, includes visible guides and baseline grids in the PDF. This is applicable only in case of pdf rendition.
                    document.
                createTaggedPDF:
                  type: boolean
                  default: true
                  description: If true, creates a tagged PDF file. This is applicable only in case of pdf rendition.
                includeInteractiveElements:
                  type: string
                  description: Specifies the option to draw interactive elements. This is applicable only in case of pdf rendition.
                  default: do_not_include
                  enum:
                    - do_not_include
                    - appearance_only
                exportWhichLayers:
                  type: string
                  description: The layers to be exported. This is applicable only in case of pdf rendition.
                  default: export_all_layers
                  enum:
                    - export_all_layers
                    - export_visible_layers
                    - export_visible_printable_layers
                jobOptionsFile:
                  type: string
                  description: The file which will be used as PDF creation settings file during the export. This will take precedence over pdfPreset attribute. This is applicable only in case of pdf rendition.
                pdfPreset:
                  type: string
                  description: The export style to be used. This is applicable only in case of pdf rendition.
                  default: High Quality Print
                  enum:
                    - High Quality Print
                    - PDF/X-1a:2001
                    - PDF/X-3:2002
                    - PDF/X-4:2008
                    - Press Quality
                    - Smallest File Size
                outputFileBaseString:
                  type: string
                  description: The name of the output file.
                outputFolderPath:
                  type: string
                  description: The path of the output folder.


    MergeDataRequest:
      allOf:
        - $ref: '#/components/schemas/BaseJobRequestWithOutput'
        - description: Inputs for the data merge request.
          type: object
          required:
            - params
          properties:
            params:
              type: object
              required:
              - targetDocument
              - dataSource
              properties:
                targetDocument:
                  description: The tagged document to be used as template for merging.
                  type: string
                dataSource:
                  description: The data source files to be used.
                  type: string
                outputMediaType:
                  description: The type of required output.
                  type: string
                  enum:
                    - 'image/jpeg'
                    - 'image/png'
                    - 'application/pdf'
                    - 'application/x-indesign'
                  default: 'application/x-indesign'
                exportSettings:
                  type: object
                  description: The settings corresponding to the output format.
                  properties:
                    jobOptionsFile:
                      type: string
                      description: Only relevant if outputMediaType is "application/pdf". The file, which will be used as PDF creation settings file during the export. This will take precedence over pdfPreset attribute.
                    pdfPreset:
                      type: string
                      description: The PDF export style to be used. This is relevant if outputMediaType is "application/pdf".
                      default: High Quality Print
                      enum:
                        - High Quality Print
                        - PDF/X-1a:2001
                        - PDF/X-3:2002
                        - PDF/X-4:2008
                        - Press Quality
                        - Smallest File Size
                    quality:
                      type: string
                      description: Defines the quality of the output for JPEG and PNG formats.
                      default: medium
                      enum:
                        - low
                        - medium
                        - high
                        - maximum
                    linkImages:
                      description: Only relevant if outputMediaType is "application/x-indesign". If true, links images to the target document. If false, embeds linked images, already referred in the target document.
                      type: boolean
                      default: false
                recordRange:
                  description: The ranges of records to process for this job. Value can be 'All' along with numeral ranges. For example, '1-2, 5'.
                  type: string
                allowMultipleRecordsPerPage:
                  description: The number of records to place on each page of the document.
                  type: boolean
                multipleRecordLayoutOptions:
                  description: The options to be used in case allowMultipleRecordsPerPage is set to true.
                  type: object
                  properties:
                    arrangeBy:
                      description: |
                        The order in which to arrange records in the target document.
                        * `rows_first` - Arranges records by row.
                        * `columns_first` - Arranges records by column.
                      type: string
                      enum:
                        - rows_first
                        - columns_first
                    bottomMargin:
                      description: The offset value of the bottom margin in the target document. The values can be specified like '1 pt', '1 pica'. '1' etc. If a number is mentioned in the string, it will be used as a value in pica.
                      type: string
                    topMargin:
                      description: The offset value of the top margin in the target document. The values can be specified like '1 pt', '1 pica'. '1' etc. If a number is mentioned in the string, it will be used as a value in pica.
                      type: string
                    leftMargin:
                      description: The offset value of the left margin in the target document. The values can be specified like '1 pt', '1 pica'. '1' etc. If a number is mentioned in the string, it will be used as a value in pica.
                      type: string
                    rightMargin:
                      description: The offset value of the right margin in the target document. The values can be specified like '1 pt', '1 pica'. '1' etc. If a number is mentioned in the string, it will be used as a value in pica.
                      type: string
                    columnSpacing:
                      description: The amount of spacing between columns of records in the target document. The values can be specified like '1 pt', '1 pica'. '1' etc. If a number is mentioned in the string, it will be used as a value in pica.
                      type: string
                    rowSpacing:
                      description: The amount of spacing between rows of records in the target document. The values can be specified like '1 pt', '1 pica'. '1' etc. If a number is mentioned in the string, it will be used as a value in pica.
                      type: string
                imagePlacementOptions:
                  description: These are the options for image placement which will be used while merging images in the document.
                  type: object
                  properties:
                    centerImage:
                      description: If true, centers the image in the frame while preserving the frame size as content size and proportions. If the content is larger than the frame, content around the edges is obscured by the bounding box of the frame. This doesn't work with 'Content_Aware_Fit' fittingOption.
                      type: boolean
                    fittingOption:
                      description: |
                        Method of fitting content in a frame.
                        * `content_aware_fit` - Selects best crop region of the content for the frame based on Adobe Sensei. Note: Preserves frame size but it might scale the content size. If this fitting is set, centerImage property is turned-off.
                        * `fill_proportional` - Resizes content to fill the frame while preserving the proportions of the content. If the content and frame have different proportions, some of the content is obscured by the bounding box of the frame.
                        * `fit_content_to_frame` - Resizes content to fit the frame. Note: Content that is a different size than the frame appears stretched or squeezed.
                        * `fit_frame_to_content` - Resizes the frame so it fits the content.
                        * `honor_existing_style` - Apply the frame fitting based on existing setting applied on the original frame.
                        * `preserve_sizes` - Preserves the original sizes of the frame and the content. Note: Content that is larger than the frame is obscured around the edges.
                        * `proportional` - Resizes content to fit the frame while preserving content proportions. If the content and frame have different proportions, an empty space occurs in the frame.
                      type: string
                      enum:
                        - content_aware_fit
                        - fill_proportional
                        - fit_content_to_frame
                        - fit_frame_to_content
                        - honor_existing_style
                        - preserve_sizes
                        - proportional
                    linkImages:
                      description: If true, links images to the target document. If false, embeds images in the target document. This is in reference to the images being brought in the document while merging.
                      type: boolean
                pagesPerDocument:
                  description: The maximum number of pages per document.
                  type: integer
                removeBlankLines:
                  description: If true, removes blank lines caused by empty fields.
                  type: boolean
                  default: false
                convertUrlToHyperlink:
                  description: If true, all urls in the merged document are converted into hyperlinks.
                  type: boolean
                  default: true
                outputFileBaseString:
                  type: string
                  description: The name of the output file.
                outputFolderPath:
                  type: string
                  description: The path of the output folder.

    MergeDataOutputData:
      allOf:
        - $ref: '#/components/schemas/BaseOutputData'
        - description: The data pertaining to the merged records.
          type: object
          properties:
            records:
              description: The information about the records which were processed.
              type: array
              items:
                type: object
                properties:
                  recordIndex:
                    type: string
                    description: Indicates the record numbers for which the data is provided here.`
                  outputs:
                    description: The list of outputs corresponding to this record.
                    type: array
                    items:
                      type: object
                      properties:
                        pageIndex:
                          type: string
                          description: Indicates the page numbers in the merged output for which the paths are mentioned below.
                        path:
                          description: The paths corresponding to the pages mentioned in pageIndex.
                          type: array
                          items:
                            type: string
                  warnings:
                    $ref: '#/components/schemas/MergeWarningResponse'
                    description: Warnings generated during the merge.
            warnings:
              $ref: '#/components/schemas/WarningResponse'
              description: Warnings generated for the template.
  
    MergeDataFailedData:
      allOf:
        - $ref: '#/components/schemas/FailedEvent'
        - description: Failed Event for Data Merge API. For details of error codes refer to ErrorCodesAndDefinitions.
          type: object
          properties:
            data:
              type: object
              properties:
                code:
                  type: integer
                  description: The error code.
                  enum:
                    - 'runtime_error'
                    - 'capability_error'
                    - 'validation_error'

    MergeDataTagsRequest:
      allOf:
        - $ref: '#/components/schemas/BaseJobRequest'
        - description: Filters according to which the information related to data merge tags would be retrieved.
          type: object
          required:
            - params
          properties:
            params:
              type: object
              required:
                - targetDocument
              properties:
                targetDocument:
                  description: The tagged document to be used for extraction of tags.
                  type: string
                dataSource:
                  description: The data source file to be used for extracting and matching the tags.
                  type: string
                filter:
                  description: Accepted values are "all", "text", "image" and "qr". Multiple values can be provided. Default value is "all". Example, ["Text, Image"]
                  type: array
                  items:
                    type: string
                includePageItemIdentifiers:
                  type: boolean
                  description: If true, the information for associated page items is added to the tags extracted from the document.
                  default: false

    MergeDataTagsOutputData:
      allOf:
        - $ref: '#/components/schemas/BaseOutputData'
        - description: The data corresponding to the tags from the documents and the data source file, if provided.
          type: object
          properties:
            documentTags:
              description: The information about the tags retrieved from the target document.
              type: array
              items:
                type: object
                properties:
                  name:
                    type: string
                    description: Name of the tag.
                  type:
                    type: string
                    description: Type of the tag.
                    enum:
                      - image
                      - text
                      - qr
                  parentPageItems:
                    description: Information about the page items where the tag is present, if it is requested.
                    type: array
                    items:
                      type: object
                      properties:
                        pageItemId:
                          type: integer
                          description: ID of the page item which has the data merge tag within it.
                        pageIndexInSpread:
                          type: integer
                          description: Zero based index of the page (in the spread) on which the page item exists.
                        pageIndexInDocument:
                          type: integer
                          description: Zero based index of the page (in the document) on which the page item exists.
                        pageId:
                          type: integer
                          description: ID of the page on which the page item exists.
                        pageName:
                          type: string
                          description: Name of the page on which the page item exists.
                        spreadIndex:
                          type: integer
                          description: Zero based index of the spread (in the document) on which the page item exists.
                        spreadId:
                          type: integer
                          description: ID of the spread on which the page item exists.
                        parentStoryId:
                          type: integer
                          description: Only valid for text tags. ID of the parent story in which the tag exists.
            dataSourceTags:
              description: The information about the tags from the data source file and their relevance for the target document.
              type: array
              items:
                type: object
                properties:
                  name:
                    type: string
                    description: Name of the tag.
                  type:
                    type: string
                    description: Type of the tag.
                    enum:
                      - image
                      - text
                      - qr
                  status:
                    type: string
                    description: Status or relevance of the tag in context to the target document.
                    enum:
                      - match
                      - extra
            dataSourceValidation:
              description: Provided when both target document and data source are given. This will include data from validation of the data source against the target document.
              type: object
              properties:
                isValid:
                  type: boolean
                  description: Indicates whether the provided data source is valid for the document.
                missingTags:
                  description: Provides the information about the tags which are missing from the data source but are required by the document.
                  type: array
                  items:
                    type: string
            warnings:
              $ref: '#/components/schemas/WarningResponse'
              description: Warnings generated during the execution of the request.

    MergeDataTagsFailedData:
      allOf:
        - $ref: '#/components/schemas/FailedEvent'
        - description: Failed Event for Data Merge Tags API. For details of error codes refer to ErrorCodesAndDefinitions.
          type: object
          properties:
            data:
              type: object
              properties:
                code:
                  type: integer
                  description: The error code.
                  enum:
                    - 'runtime_error'
                    - 'capability_error'
                    - 'validation_error'
    
    BaseEvent:
      type: object
      description: Base event response for any job.
      properties:
        jobId:
          description: Guid ID for the Job.
          type: string

    notstartedEvent:
      allOf:
        - $ref: '#/components/schemas/BaseEvent'
        - description: Job is in queued state.
          type: object
          properties:
            status:
              type: string
              description: The current state of the job.
              enum:
                - not_started

    runningEvent:
      allOf:
        - $ref: '#/components/schemas/BaseEvent'
        - description: Job is in running state.
          type: object
          properties:
            status:
              type: string
              description: The current state of the job.
              enum:
                - running
            message :
              type: string
              description: Description of current running state.

    succeededEvent:
      allOf:
        - $ref: '#/components/schemas/BaseEvent'
        - description: Job is completed.
          type: object
          properties:
            status:
              type: string
              description: The current state of the job.
              enum:
                - completed
            data:
              type: object
              description: Output response from  current state of the job.
            dataURL:
              type: string
              description: The data returned from execution of capability. If the data is more than 250 kB and less the 20 MB, it will be provided as a presigned URL. If it is more than 20 MB, the job will fail.
            outputs:
              type: object
              description: This contains list of URL for all the generated assets 
                  
    failedEvent:
      allOf:
        - $ref: '#/components/schemas/BaseEvent'
        - description: Job is in failed state.
          type: object
          properties:
            status:
              type: string
              description: The current state of the job.
              enum:
                - failed
            error_code:
              type: string
              description: Error code for failure.
            message:
              type: string
              description: Error message for failure 


    ErrorCodesAndDefinitions:
      allOf:
        - type: object
          description: Error codes from capabilities and their definitions.
          properties:
            runtime_error:
              type: string
              description : |
                - Runtime error: Unable to connect to server for communication.
                - Runtime error: Error parsing the response from application.
                - Runtime script error. This should not had happened.
                - Runtime error: Error during processing.
                - Runtime error: Unable to create specified output directory.
                - PreJob runtime script error. This should not had happened.
                - PreJob runtime error: Error during processing.
                - PreJob runtime error: Unable to create specified output directory.
                - Application error: Script execution failed.
                - Error during processing.
            capability_error:
              type: string
              description: |
                - Capability error: No PDF Preset could be set.
                - Capability error: Unable to relink. Relink failed for 'parameterName'.
                - Capability error: Unable to place. Place failed for 'parameterName'.
                - Capability error: Cannot open file.
            validation_error:
              type: string
              description: |
                - Validation error: Expected array for property 'parameterName'.
                - Validation error: Expected boolean 'parameterName' is the provided value for property 'parameterName'.
                - Validation error: Expected integer 'parameterName' is the provided value for property 'parameterName'.
                - Validation error: Expected number 'parameterName' is the provided value for property 'parameterName'.
                - Validation error: Expected string 'parameterName' is the provided value for property 'parameterName'.
                - Validation error: Incorrect range provided. Culprit Value is 'parameterName'.
                - Validation error: Key not found in object. Missing key is 'parameterName'.
                - Validation error: No matching enum value found. 'parameterName' is the provided value for property 'parameterName'.
                - Validation error: Empty filter provided for extraction of tags.
                - Validation error: Empty data source found.
                - Validation error: Relative path not acceptable. Path provided is 'parameterName'
                - Validation error: Mismatch in jobType. Provided value is 'parameterName'
                - Validation error: Either the params is not found in the request or it is not in the correct format.
                - Validation error: Required parameters are missing. Please check 'parameterName'
                - Validation error: The link URI was not found. Provided link URI is 'parameterName'.
                - Validation error: Expected object for property 'parameterName'.
                - Validation error: At least one of the parameters should be present. Missing parameters are 'parameterName'
                - Validation error: Unable to send the script to the server. Please check the path of the script.
                - Validation error: The link id was not found. Provided link id is 'parameterName'.
                - Validation error: Unable to send the script to the server. Please check the path of the script.
                - Validation error: Relative path not acceptable. 'parameterName' is the provided value for property 'parameterName'.
                - PreJob validation error: Expected array for property 'parameterName'.
                - PreJob validation error: Expected boolean 'parameterName' is the provided value for property 'parameterName'.
                - PreJob validation error: Expected integer 'parameterName' is the provided value for property 'parameterName'.
                - PreJob validation error: Expected number 'parameterName' is the provided value for property 'parameterName'.
                - PreJob validation error: Expected string 'parameterName' is the provided value for property 'parameterName'.
                - PreJob validation error: Incorrect range provided. Culprit Value is 'parameterName'.
                - PreJob validation error: Key not found in object. Missing key is 'parameterName'.
                - PreJob validation error: No matching enum value found. 'parameterName' is the provided value for property 'parameterName'.
                - PreJob validation error: Relative path not acceptable. Path provided is 'parameterName'  
            application_error:
              type: string
              description : |
                - Application error: Script execution failed.
                - Error during processing.
            resource_not_found:
              type: string
              description : |
                - Error in resolving asset
                - Job id not found
            invalid_parameters:
              type: string
              description : |
                - invalid capability bundle
                - invalid extension
                - invalid storage type
                - invalid request parameters
            access_error:
              type: string
              description : |
                - api-key not allowed
                - capability not found
                - user does not have access to the resource
                - private capability
            unauthorised_error:
              type: string
              description : |
                - Application error: Script execution failed.
                - Error during processing.
            unsupported_method:
              type: string
              description : |
                - HTTP method used in the request is not allowed for the requested resource
            request_not_acceptable:
              type: string
              description : |
                - the server cannot produce a response that matches any of the acceptable media types specified in the Accept header.
            invalid_content_type:
              type: string
              description : |
                - Payload is in unsupported format
            service_unavailable:
              type: string
              description : |
                - Error while getting organization for user
            timeout_error:
              type: string
              description : |
                - Job execution exceeded timeout
                - Job timeout occurred

    StatusResponse:
      type: object
      description:  Response body which is sent back on querying the status API.
      properties:
        events:
          type: array
          items:
            oneOf:
              - $ref: '#/components/schemas/notstartedEvent'
              - $ref: '#/components/schemas/runningEvent'
              - $ref: '#/components/schemas/succeededEvent'
              - $ref: '#/components/schemas/failedEvent'

    InputAsset:
      type: object
      description: The Url, from where the asset is to be fetched.
      required:
        - source
      properties:
        source:
          type: object
          required:
            - url
          properties:
            url:
              type: string
              description: URL of the asset.
            storageType:
              type: string
              description: This is optional parameter. It is recommended to provide this information.
              enum:
                - Azure
                - Dropbox
            
        destination:
          type: string
          description: This provides a path relative to a temporary base directory (working directory) where resource would be downloaded. This would be used to identify the assets within the parameters.
            It cannot go up using '..' or '/'. Should be a valid file name.

    OutputAsset:
      description: The url, where the output assets are to be posted after the job processing.
      type: object
      required:
        - destination
        - source
      properties:
        destination:
          type: object
          required:
            - url
          properties:
            url:
              type: string
              description: URL of the asset.
            storageType:
              type: string
              description: This is optional parameter. It is recommended to provide this information.
              enum:
                - Azure
                - Dropbox
        source:
          type: string
          description: This provides a path relative of the output where resource would be generated.
            It cannot go up using '..' or '/'. Should be a valid file name.
    
    WebHookEvents:
      type: object
      description:  Response body which is sent back on querying the status API.
      properties:
        events:
          type: array
          items:
            oneOf:
              - $ref: '#/components/schemas/QueuedEvent'
              - $ref: '#/components/schemas/RunningEvent'
              - $ref: '#/components/schemas/AssetsDownloadStartedEvent'
              - $ref: '#/components/schemas/AssetDownloadStartedEvent'
              - $ref: '#/components/schemas/AssetDownloadCompletedEvent'
              - $ref: '#/components/schemas/AssetDownloadFailedEvent'
              - $ref: '#/components/schemas/AssetsDownloadCompletedEvent'
              - $ref: '#/components/schemas/AssetsUploadStartedEvent'
              - $ref: '#/components/schemas/AssetUploadStartedEvent'
              - $ref: '#/components/schemas/AssetUploadCompletedEvent'
              - $ref: '#/components/schemas/AssetUploadFailedEvent'
              - $ref: '#/components/schemas/AssetsUploadCompletedEvent'
              - $ref: '#/components/schemas/AssetScanningStartedEvent'
              - $ref: '#/components/schemas/AssetScanningCompletedEvent'
              - $ref: '#/components/schemas/AssetScanningFailedEvent'
              - $ref: '#/components/schemas/EngineProcessingStartedEvent'
              - $ref: '#/components/schemas/EngineProcessingCompletedEvent'
              - $ref: '#/components/schemas/CompletedEvent'
              - $ref: '#/components/schemas/FailedEvent'
    
    BaseWebHookEvent:
      type: object
      description: Base event response for any job.
      properties:
        eventId:
          description: Event ID for the latest event.
          type: string
        id:
          description: Capability Execution ID.
          type: string
        timestamp:
          type: string
          description: Time stamp in ISO 8601 format
    
    QueuedEvent:
      allOf:
        - $ref: '#/components/schemas/BaseWebHookEvent'
        - description: Queued Event
          type: object
          properties:
            state:
              type: string
              description: The current state of the job.
              enum:
                - QUEUED

    RunningEvent:
      allOf:
        - $ref: '#/components/schemas/BaseWebHookEvent'
        - description: Running Event
          type: object
          properties:
            state:
              type: string
              description: The current state of the job.
              enum:
                - RUNNING
            data:
              type: object
              properties:
                percent:
                  type: string

    AssetsDownloadStartedEvent:
      allOf:
        - $ref: '#/components/schemas/BaseWebHookEvent'
        - description: Assets download started Event.
          type: object
          properties:
            state:
              type: string
              description: The current state of the job.
              enum:
                - ASSETS_DOWNLOAD_STARTED
            data:
              type: object
              properties:
                total:
                  type: string
                  description: Number of assets to download.

    AssetDownloadStartedEvent:
      allOf:
        - $ref: '#/components/schemas/BaseWebHookEvent'
        - description: Asset download start event.
          type: object
          properties:
            state:
              type: string
              description: The current state of the job.
              enum:
                - ASSET_DOWNLOAD_STARTED
            data:
              type: object

    AssetDownloadCompletedEvent:
      allOf:
        - $ref: '#/components/schemas/BaseWebHookEvent'
        - description: Asset download complete event.
          type: object
          properties:
            state:
              type: string
              description: The current state of the job.
              enum:
                - ASSET_DOWNLOAD_COMPLETED
            data:
              type: object              
  
    AssetDownloadFailedEvent:
      allOf:
        - $ref: '#/components/schemas/BaseWebHookEvent'
        - description: Asset download failed event.
          type: object
          properties:
            state:
              type: string
              description: The current state of the job.
              enum:
                - ASSET_DOWNLOAD_FAILED
            data:
              type: object
    
    AssetsDownloadCompletedEvent:
      allOf:
        - $ref: '#/components/schemas/BaseWebHookEvent'
        - description: Assets download complete event.
          type: object
          properties:
            state:
              type: string
              description: The current state of the job.
              enum:
                - ASSETS_DOWNLOAD_COMPLETED
            data:
              type: object
              
    AssetsUploadStartedEvent:
      allOf:
        - $ref: '#/components/schemas/BaseWebHookEvent'
        - description: Assets upload start event
          type: object
          properties:
            state:
              type: string
              description: The current state of the job.
              enum:
                - ASSETS_UPLOAD_STARTED
            data:
              type: object
              properties:
                total:
                  type: string
                  description: Number of assets to upload.

    AssetUploadStartedEvent:
      allOf:
        - $ref: '#/components/schemas/BaseWebHookEvent'
        - description: Asset upload start event.
          type: object
          properties:
            state:
              type: string
              description: The current state of the job.
              enum:
                - ASSET_UPLOAD_STARTED
            data:
              type: object
              
    AssetUploadCompletedEvent:
      allOf:
        - $ref: '#/components/schemas/BaseWebHookEvent'
        - description: Asset upload completed event.
          type: object
          properties:
            state:
              type: string
              description: The current state of the job.
              enum:
                - ASSET_UPLOAD_COMPLETED
            data:
              type: object
              
    AssetUploadFailedEvent:
      allOf:
        - $ref: '#/components/schemas/BaseWebHookEvent'
        - description: Asset upload failed event.
          type: object
          properties:
            state:
              type: string
              description: The current state of the job.
              enum:
                - ASSET_UPLOAD_FAILED
            data:
              type: object
              
    AssetsUploadCompletedEvent:
      allOf:
        - $ref: '#/components/schemas/BaseWebHookEvent'
        - description: Assets upload completed event.
          type: object
          properties:
            state:
              type: string
              description: The current state of the job.
              enum:
                - ASSETS_UPLOAD_COMPLETED
            data:
              type: object

    AssetScanningStartedEvent:
      allOf:
        - $ref: '#/components/schemas/BaseWebHookEvent'
        - description: Asset Scanning started event.
          type: object
          properties:
            state:
              type: string
              description: The current state of the job.
              enum:
                - ASSET_SCANNING_STARTED
            data:
              type: object

    AssetScanningCompletedEvent:
      allOf:
        - $ref: '#/components/schemas/BaseWebHookEvent'
        - description: Asset Scanning completed event.
          type: object
          properties:
            state:
              type: string
              description: The current state of the job.
              enum:
                - ASSET_SCANNING_COMPLETED
            data:
              type: object

    AssetScanningFailedEvent:
      allOf:
        - $ref: '#/components/schemas/BaseWebHookEvent'
        - description: Asset scanning failed event.
          type: object
          properties:
            state:
              type: string
              description: The current state of the job.
              enum:
                - ASSET_SCANNING_FAILED
            data:
              type: object

    EngineProcessingStartedEvent:
      allOf:
        - $ref: '#/components/schemas/BaseWebHookEvent'
        - description: Engine processing starting event.
          type: object
          properties:
            state:
              type: string
              description: The current state of the job.
              enum:
                - ENGINE_PROCESSING_STARTED

    EngineProcessingCompletedEvent:
      allOf:
        - $ref: '#/components/schemas/BaseWebHookEvent'
        - description: Engine processing completed event.
        
          type: object
          properties:
            state:
              type: string
              description: The current state of the job.
              enum:
                - ENGINE_PROCESSING_COMPLETED
              
    CompletedEvent:
      allOf:
        - $ref: '#/components/schemas/BaseWebHookEvent'
        - description: Completed Event.
          type: object
          properties:
            state:
              type: string
              description: The current state of the job.
              enum:
                - COMPLETED
            data:
              description: The data returned from execution of capability. If the data is less than 250 kB, then the data would be provided here.
              type: object
            dataURL:
              description: The data returned from execution of capability. If the data is more than 250 kB and less the 20 MB, it will be provided as a presigned URL. If it is more than 20 MB, the job will fail with error code 413.
              type: string

    FailedEvent:
      allOf:
        - $ref: '#/components/schemas/BaseWebHookEvent'
        - description: Failed Event
          type: object
          properties:
            state:
              type: string
              description: The current state of the job.
              enum:
                - FAILED
            data:
              type: object
              properties:
                reason:
                  type: string
                  description: The description of the error message.
                code:
                  type: integer
                  description: The error code.
